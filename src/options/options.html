<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>SecGuard 配置中心</title>
    <link rel="stylesheet" href="./options.css" />
  </head>
  <body>
    <div class="options-shell">
      <header>
        <div>
          <h1>SecGuard 配置</h1>
          <p>管理 LLM 与 MCP Server 的所有参数</p>
        </div>
        <button id="back-to-popup" class="ghost-btn">返回对话</button>
      </header>

      <section class="card">
        <h2>LLM 设置</h2>
        <div class="field">
          <label for="llm-endpoint">API 地址</label>
          <input
            id="llm-endpoint"
            type="url"
            placeholder="https://api.your-llm.com/v1/chat/completions"
          />
        </div>
        <div class="field">
          <label for="api-key">API Key</label>
          <input id="api-key" type="password" placeholder="sk-xxxx" />
        </div>
        <div class="field">
          <label for="model-name">模型名称</label>
          <input id="model-name" type="text" placeholder="gpt-4o, qwen, etc." />
        </div>
        <div class="field">
          <label for="access-code">Authorization (可选)</label>
          <input id="access-code" type="text" placeholder="ACCESSCODE xxxx" />
        </div>
        <div class="checkbox-field">
          <input id="auto-run" type="checkbox" />
          <label for="auto-run">自动执行 ReAct 中的 MCP Action</label>
        </div>
        <div class="field">
          <label for="max-steps">最大 ReAct 步数</label>
          <input id="max-steps" type="number" min="1" max="12" value="6" />
        </div>
        <div class="inline-actions">
          <button id="test-llm">测试模型连接</button>
          <span id="model-test-status" class="status">等待测试</span>
        </div>
      </section>

      <section class="card">
        <h2>MCP Server</h2>
        <div class="field">
          <label for="mcp-server-select">已保存的 Server</label>
          <select id="mcp-server-select"></select>
        </div>
        <div class="field">
          <label for="mcp-server-name">Server 名称</label>
          <input id="mcp-server-name" type="text" placeholder="示例：生产环境" />
        </div>
        <div class="field">
          <label for="mcp-server-url">Server SSE 地址</label>
          <input
            id="mcp-server-url"
            type="url"
            placeholder="https://your-mcp.example.com/sse"
          />
        </div>
        <div class="inline-actions">
          <button id="discover-tools">发现工具</button>
          <span id="discover-status" class="status">等待操作</span>
        </div>
        <div class="field">
          <label for="mcp-tool-select">默认工具</label>
          <select id="mcp-tool-select"></select>
        </div>
        <div class="field">
          <label>工具启用与说明</label>
          <div id="mcp-tool-list" class="tool-list">
            <p class="tool-list-empty">暂无工具，请先点击「发现工具」</p>
          </div>
        </div>
        <div class="inline-actions">
          <button id="save-server" class="primary-btn">保存 Server</button>
          <button id="remove-server" class="ghost-btn">删除当前 Server</button>
        </div>
        <div class="inline-actions">
          <button id="test-mcp">测试 MCP 连接</button>
          <span id="mcp-test-status" class="status">等待测试</span>
        </div>
      </section>

      <section class="card">
        <h2>全局操作</h2>
        <div class="inline-actions">
          <button id="save-config" class="primary-btn">保存配置</button>
          <span id="save-status" class="status">尚未保存</span>
        </div>
      </section>
    </div>

    <script type="module" src="./options.js"></script>
  </body>
</html>

